(this.webpackJsonpfollowed=this.webpackJsonpfollowed||[]).push([[0],{20:function(t,n,e){t.exports={root:"Cell_root__2ti8K",empty:"Cell_empty__1ByI9"}},24:function(t,n,e){t.exports={root:"Grid_root__xSU_B",row:"Grid_row__1rWaL"}},28:function(t,n){},29:function(t,n){},30:function(t,n,e){t.exports={app:"index_app__2lpzC"}},31:function(t,n,e){t.exports={root:"App_root__ZxxJN"}},34:function(t,n,e){t.exports={root:"Entity_root__MaGTf"}},41:function(t,n,e){t.exports=e(54)},54:function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"maze",(function(){return R}));var a={};e.r(a),e.d(a,"nOf",(function(){return W})),e.d(a,"sorted",(function(){return L})),e.d(a,"nonNull",(function(){return C})),e.d(a,"randomItem",(function(){return G}));var o={};e.r(o),e.d(o,"randomInRange",(function(){return H}));var i={};e.r(i),e.d(i,"centerOnPoint",(function(){return z}));var c={};e.r(c),e.d(c,"create",(function(){return B})),e.d(c,"area",(function(){return Q})),e.d(c,"randomPoint",(function(){return V})),e.d(c,"pointAlongEdge",(function(){return Y}));var u={};e.r(u),e.d(u,"fromApi",(function(){return J}));var d={};e.r(d),e.d(d,"fromMazeData",(function(){return q})),e.d(d,"canWalk",(function(){return F}));var s={};e.r(s),e.d(s,"isLoading",(function(){return Z})),e.d(s,"isLoaded",(function(){return X})),e.d(s,"isErrored",(function(){return $})),e.d(s,"loading",(function(){return tt})),e.d(s,"loaded",(function(){return nt})),e.d(s,"errored",(function(){return et})),e.d(s,"map",(function(){return rt}));var f={};e.r(f),e.d(f,"create",(function(){return ot}));var l={};e.r(l),e.d(l,"create",(function(){return it}));var p={};e.r(p),e.d(p,"getColor",(function(){return ct})),e.d(p,"getDisplayName",(function(){return ut})),e.d(p,"generateAiInstructions",(function(){return dt}));var m={};e.r(m),e.d(m,"create",(function(){return ft})),e.d(m,"next",(function(){return lt})),e.d(m,"DISPLAY",(function(){return pt}));var y={};e.r(y),e.d(y,"create",(function(){return mt}));var v={};e.r(v),e.d(v,"create",(function(){return yt})),e.d(v,"toIndex",(function(){return vt})),e.d(v,"fromIndex",(function(){return Et})),e.d(v,"neighbor",(function(){return bt})),e.d(v,"neighbors",(function(){return Ot})),e.d(v,"equals",(function(){return ht}));var E={};e.r(E),e.d(E,"create",(function(){return gt}));var b={};e.r(b),e.d(b,"fromEntities",(function(){return Tt})),e.d(b,"entitiesAtPoint",(function(){return xt})),e.d(b,"moveEntity",(function(){return Mt})),e.d(b,"updateEntity",(function(){return kt})),e.d(b,"entitiesCrossed",(function(){return _t})),e.d(b,"neighborsCrossedByEntity",(function(){return At}));var O={};e.r(O),e.d(O,"create",(function(){return jt})),e.d(O,"displayGrid",(function(){return St})),e.d(O,"generateAllAIInstructions",(function(){return Dt}));var h={};e.r(h),e.d(h,"move",(function(){return Nt})),e.d(h,"update",(function(){return Pt})),e.d(h,"wait",(function(){return Rt})),e.d(h,"validate",(function(){return Ut})),e.d(h,"validateAll",(function(){return Wt})),e.d(h,"apply",(function(){return Lt})),e.d(h,"applyAll",(function(){return Ct}));var g={};e.r(g),e.d(g,"Direction",(function(){return It})),e.d(g,"all",(function(){return Ht})),e.d(g,"inverse",(function(){return zt}));var w={};e.r(w),e.d(w,"ok",(function(){return Bt})),e.d(w,"err",(function(){return Qt})),e.d(w,"isErr",(function(){return Vt})),e.d(w,"isOk",(function(){return Yt})),e.d(w,"map",(function(){return Jt}));var T={};e.r(T),e.d(T,"of",(function(){return Kt})),e.d(T,"none",(function(){return qt})),e.d(T,"withDefault",(function(){return Ft})),e.d(T,"map",(function(){return Zt})),e.d(T,"ifPresent",(function(){return Xt}));var x,M=e(1),k=e.n(M),_=e(17),A=e.n(_),j=e(30),S=e.n(j),D=e(31),I=e.n(D),N=e(19),P="https://fv9o21r19a.execute-api.us-east-1.amazonaws.com/dev",R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.dimension,e=void 0===n?c.create(10,10):n,r=t.algorithm,a=void 0===r?"aldous-broder":r,o=fetch("".concat(P),{method:"post",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({dimensions:e,algorithm:a})});return o.then((function(t){return t.text()})).then((function(t){return u.fromApi(e,t)}))},U=e(9),W=function(t,n){return new Array(t).fill(n)},L=function(t,n){var e=Object(U.a)(t);return e.sort(n),e},C=function(t){return t.filter((function(t){return null!=t}))},G=function(t){return t[Math.floor(Math.random()*t.length)]},H=function(t,n){return t+Math.floor(Math.random()*(n-t-1))},z=function(t,n,e){for(var r=n.x-e,a=n.x+e+1,o=n.y-e,i=n.y+e+1,c=[],u=o;u<i;u++){for(var d=[],s=function(n){d.push(T.map((function(t){return t[n]}),t[u]))},f=r;f<a;f++)s(f);c.push(d)}return c},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{width:t,height:n}},Q=function(t){return t.width*t.height},V=function(t){return v.fromIndex(Math.floor(Math.random()*Q(t)),t)},Y=function(t){var n=Math.random()>.5;return v.create(n?o.randomInRange(0,t.width):Math.random()>.5?0:t.width-1,n?Math.random()>.5?0:t.height-1:o.randomInRange(0,t.height))},J=function(t,n){return{bytes:Uint8Array.from(atob(n),(function(t){return t.charCodeAt(0)})),dimension:t}},K=function(t){return{walls:(n={n:!((8&t)>0),s:!((4&t)>0),e:!((2&t)>0),w:!((1&t)>0)},{n:n.n||!1,e:n.e||!1,s:n.s||!1,w:n.w||!1})};var n},q=function(t){for(var n=t.dimension,e=t.bytes,r=[],a=0;a<n.height;a++){for(var o=[],i=0;i<n.width;i++)o.push(K(e[a*n.width+i]));r.push(o)}return{grid:r,dimension:n}},F=function(t,n,e){var r=n.x,a=n.y;return!function(t,n){var e=t.walls;switch(n){case g.Direction.NORTH:return e.n;case g.Direction.EAST:return e.e;case g.Direction.SOUTH:return e.s;case g.Direction.WEST:return e.w}}(t.grid[a][r],e)},Z=function(t){return"Loading"===t.state},X=function(t){return"Loaded"===t.state},$=function(t){return"Errored"===t.state},tt=function(){return{state:"Loading"}},nt=function(t){return{state:"Loaded",data:t}},et=function(t){return{state:"Errored",e:t}},rt=function(t,n){return X(n)?nt(t(n.data)):n},at=e(33),ot=function(){return Object(at.v4)()},it=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.create();return{id:f.create(),name:t,position:n,type:"player"}},ct=(e(28),function(t){switch(t.type){case"player":return"var(--blue)";case"exit":return"var(--green)";case"blind-guardian":return"transparent";default:return"var(--red)"}}),ut=function(t){switch(t.type){case"player":return t.name[0];case"blind-guardian":return m.DISPLAY;default:return t.type[0]}},dt=function(t,n){switch(t.type){case"blind-guardian":return m.next(t,n);default:return[]}},st=e(5),ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.create();return{type:"blind-guardian",position:t,id:f.create(),heading:g.Direction.NORTH}},lt=function(t,n){var e,r=g.all().filter((function(e){return d.canWalk(n.maze,t.position,e)})),o=r.filter((function(n){return n!==g.inverse(t.heading)}));return e=r.includes(t.heading)&&Math.random()<.75?t.heading:Math.random()<.75&&o.length>0?a.randomItem(o):r[0],[h.update(Object(st.a)({},t,{heading:e})),h.move(t.id,e)]},pt="\ud83d\uddff",mt=function(t){return{position:t,id:f.create(),type:"exit"}},yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{x:t,y:n}},vt=function(t,n){var e=t.x;return t.y*n.width+e},Et=function(t,n){var e=n.width;return yt(Math.floor(t/e),t%e)},bt=function(t,n){switch(n){case"NORTH":return v.create(t.x,t.y-1);case"SOUTH":return v.create(t.x,t.y+1);case"EAST":return v.create(t.x+1,t.y);case"WEST":default:return v.create(t.x-1,t.y)}},Ot=function(t,n){return g.all().map((function(n){return bt(t,n)})).filter((function(t){return t.x>=0&&t.y>=0&&t.x<n.width&&t.y<n.height}))},ht=function(t,n){return t.x===n.x&&t.y===n.y},gt=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return{instructions:n,id:f.create()}},wt=e(12),Tt=function(t,n){return{entityMap:t.reduce((function(t,n){return t[n.id]=n,t}),{}),positionMap:t.reduce((function(t,e){var r=v.toIndex(e.position,n);return t[r]=t[r]?[].concat(Object(U.a)(t[r]),[e.id]):[e.id],t}),{}),playerEntityId:T.map((function(t){return t.id}),t.find((function(t){return"player"===t.type}))),typeMap:t.reduce((function(t,n){return Object(st.a)({},t,Object(wt.a)({},n.type,t[n.id]?[].concat(Object(U.a)(t[n.id]),[n.id]):[n.id]))}),{})}},xt=function(t,n,e){var r=v.toIndex(n,e);return(t.positionMap[r]||[]).map((function(n){return t.entityMap[n]}))},Mt=function(t,n,e,r){var a=n.entityMap[t];if(null!=a){var o,i=v.toIndex(a.position,r),c=v.toIndex(e,r),u=Object(st.a)({},a,{position:e});return Object(st.a)({},n,{entityMap:Object(st.a)({},n.entityMap,Object(wt.a)({},t,u)),positionMap:Object(st.a)({},n.positionMap,(o={},Object(wt.a)(o,i,Object(U.a)((n.positionMap[i]||[]).filter((function(n){return n!==t})))),Object(wt.a)(o,c,[].concat(Object(U.a)(n.positionMap[c]||[]),[t])),o))})}return n},kt=function(t,n){return Object(st.a)({},n,{entityMap:Object(st.a)({},n.entityMap,Object(wt.a)({},t.id,t))})},_t=function(t,n,e,r){var a=t.entityMap[e],o=t.entityMap[r],i=n.entityMap[e],c=n.entityMap[r];return v.equals(i.position,o.position)&&v.equals(c.position,a.position)},At=function(t,n,e,r){return v.neighbors(n.entityMap[e].position,r).map((function(t){return v.toIndex(t,r)})).reduce((function(t,e){return t.concat(n.positionMap[e]||[])}),[]).filter((function(r){return _t(t,n,e,r)})).map((function(t){return n.entityMap[t]}))},jt=function(t,n){return{maze:t,entityData:n}},St=function(t){var n=t.maze,e=t.entityData;return n.grid.reduce((function(t,r,a){return[].concat(Object(U.a)(t),[r.reduce((function(t,r,o){return t.concat({cell:r,occupants:b.entitiesAtPoint(e,v.create(o,a),n.dimension)})}),[])])}),[])},Dt=function(t){return Object.keys(t.entityData.entityMap).map((function(n){return t.entityData.entityMap[n]})).filter((function(t){return"player"!==t.type})).reduce((function(n,e){return n.concat(p.generateAiInstructions(e,t))}),[])};!function(t){t.MOVE="MOVE",t.UPDATE="UPDATE",t.WAIT="WAIT"}(x||(x={}));var It,Nt=function(t,n){return{type:x.MOVE,entityId:t,payload:{direction:n}}},Pt=function(t){return{type:x.UPDATE,entityId:t.id,payload:{updated:t}}},Rt=function(t){return{type:x.WAIT,entityId:t}},Ut=function(t,n){switch(t.type){case x.MOVE:return function(t,n){return d.canWalk(n.maze,n.entityData.entityMap[t.entityId].position,t.payload.direction)?w.ok(void 0):w.err("way is blocked")}(t,n);case x.WAIT:return w.ok(void 0);default:return w.err("Unkown instruction of type ".concat(t.type))}},Wt=function(t,n){return t.reduce((function(t,e){return w.isOk(t)?Ut(e,n):t}),w.ok(void 0))},Lt=function(t,n){try{switch(t.type){case x.MOVE:return w.ok(function(t,n){return Object(st.a)({},n,{entityData:b.moveEntity(t.entityId,n.entityData,v.neighbor(n.entityData.entityMap[t.entityId].position,t.payload.direction),n.maze.dimension)})}(t,n));case x.UPDATE:return w.ok(function(t,n){return Object(st.a)({},n,{entityData:b.updateEntity(t.payload.updated,n.entityData)})}(t,n));case x.WAIT:return w.ok(function(t,n){return Object(st.a)({},n)}(0,n))}}catch(e){return console.warn("Error applying instruction",t),console.error(e),w.err("Error applying instructions")}},Ct=function(t,n){return t.reduce((function(t,n){return w.isOk(t)?Lt(n,t.data):t}),w.ok(n))};!function(t){t.NORTH="NORTH",t.SOUTH="SOUTH",t.EAST="EAST",t.WEST="WEST"}(It||(It={}));var Gt,Ht=function(){return[It.NORTH,It.SOUTH,It.EAST,It.WEST]},zt=function(t){switch(t){case It.NORTH:return It.SOUTH;case It.SOUTH:return It.NORTH;case It.EAST:return It.WEST;case It.WEST:return It.EAST}},Bt=function(t){return{type:"Ok",data:t}},Qt=function(t){return{type:"Error",msg:t}},Vt=function(t){return"Error"===t.type},Yt=function(t){return"Ok"===t.type},Jt=function(t,n){return Yt(n)?Bt(t(n.data)):n},Kt=(e(29),function(t){return t}),qt=function(){},Ft=function(t,n){return null!=t?t:"function"===typeof n?n():n},Zt=function(t,n){return null!=n?t(n):void 0},Xt=function(t,n){n&&t(n)},$t=e(16),tn=function(t){return t},nn=Object($t.a)(tn,(function(t){return t.game})),en=Object($t.a)(nn,(function(t){return s.map(O.displayGrid,t)})),rn=Object($t.a)(tn,(function(t){return null!=t.stepId})),an=Object($t.a)(nn,(function(t){return s.isLoaded(t)?T.map((function(n){return t.data.entityData.entityMap[n]}),t.data.entityData.playerEntityId):void 0})),on=Object($t.a)(en,an,(function(t,n){return s.map((function(t){return null!=n?i.centerOnPoint(t,n.position,3):[]}),t)})),cn=e(20),un=e.n(cn),dn=e(34),sn=e.n(dn),fn=function(t){return k.a.createElement("div",{className:sn.a.root,style:{backgroundColor:p.getColor(t)}},p.getDisplayName(t))},ln=e(13),pn=e.n(ln),mn=function(t){return t?"0.5px solid black":"0.5px transparent"},yn=function(t){var n=t.cell,e=t.occupants,r=n.walls;return k.a.createElement("div",{className:un.a.root,style:{borderTop:mn(r.n),borderRight:mn(r.e),borderBottom:mn(r.s),borderLeft:mn(r.w)}},T.map((function(t){return k.a.createElement(fn,t)}),e[0]))},vn=function(){return k.a.createElement("div",{className:pn()(un.a.empty,un.a.root)})},En=e(24),bn=e.n(En),On=function(t){var n=t.grid;return k.a.createElement("div",{className:bn.a.root},n.map((function(t,n){return k.a.createElement("div",{key:n,className:bn.a.row},t.map((function(t,n){return T.withDefault(T.map((function(t){return k.a.createElement(yn,{key:n,cell:t.cell,occupants:t.occupants})}),t),k.a.createElement(vn,null))})))})))},hn=e(6),gn=e.n(hn),wn=function(t){var n=t.onMove;return k.a.createElement("div",{className:gn.a.root},k.a.createElement("div",{className:gn.a.row},k.a.createElement("div",{className:gn.a.block}),k.a.createElement("button",{className:pn()(gn.a.block,gn.a.button),onClick:function(){return n(g.Direction.NORTH)}}),k.a.createElement("div",{className:gn.a.block})),k.a.createElement("div",{className:gn.a.row},k.a.createElement("button",{className:pn()(gn.a.block,gn.a.button),onClick:function(){return n(g.Direction.WEST)}}),k.a.createElement("button",{className:pn()(gn.a.block,gn.a.button,gn.a.wait),onClick:function(){return n(void 0)}}),k.a.createElement("button",{className:pn()(gn.a.block,gn.a.button),onClick:function(){return n(g.Direction.EAST)}})),k.a.createElement("div",{className:gn.a.row},k.a.createElement("div",{className:gn.a.block}),k.a.createElement("button",{className:pn()(gn.a.block,gn.a.button),onClick:function(){return n(g.Direction.SOUTH)}}),k.a.createElement("div",{className:gn.a.block})))},Tn=e(35),xn=e(36),Mn=e(39),kn=e(37),_n=e(40),An=function(t){function n(){var t,e;Object(Tn.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=Object(Mn.a)(this,(t=Object(kn.a)(n)).call.apply(t,[this].concat(a)))).handleKeyDown=function(t){e.props.disabled||("ArrowUp"===t.key||"w"===t.key?e.props.onMove(g.Direction.NORTH):"ArrowRight"===t.key||"d"===t.key?e.props.onMove(g.Direction.EAST):"ArrowDown"===t.key||"d"===t.key?e.props.onMove(g.Direction.SOUTH):"ArrowLeft"===t.key||"a"===t.key?e.props.onMove(g.Direction.WEST):" "===t.key&&e.props.onMove(void 0))},e}return Object(_n.a)(n,t),Object(xn.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return M.createElement(M.Fragment,null)}}]),n}(M.PureComponent),jn=function(t){var n=t.grid,e=t.onMove,r=t.processingUpdates;return M.createElement(M.Fragment,null,M.createElement(On,{grid:n}),M.createElement(wn,{onMove:e}),M.createElement(An,{onMove:e,disabled:r}))};!function(t){t.REQUEST_NEW_GAME="REQUEST_NEW_GAME",t.START_NEW_GAME="START_NEW_GAME",t.REQUEST_STEP="REQUEST_STEP",t.COMPLETE_STEP="COMPLETE_STEP",t.ABORT_STEP="ABORT_STEP",t.MOVE_PLAYER="MOVE_PLAYER"}(Gt||(Gt={}));var Sn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Gt.REQUEST_NEW_GAME,options:t}},Dn=function(t,n){return{type:Gt.START_NEW_GAME,maze:t,entities:n}},In=function(t){return{type:Gt.ABORT_STEP,stepId:t}},Nn=function(t,n){return{type:Gt.COMPLETE_STEP,stepId:t,gameData:n}},Pn=Object(N.b)((function(t){return{grid:on(t),processingUpdates:rn(t)}}),(function(t){return{onMove:function(n){return t((e=n,{type:Gt.MOVE_PLAYER,direction:e}));var e}}}))((function(t){var n=t.grid,e=t.processingUpdates,r=t.onMove;return k.a.createElement("div",{className:I.a.root},s.isLoading(n)&&k.a.createElement("span",null,"Loading . . . "),s.isLoaded(n)&&n.data&&k.a.createElement(jn,{processingUpdates:e,grid:n.data,onMove:r}))})),Rn=e(14),Un=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(st.a)({game:s.loading()},t)},Wn=function(t){return Object(st.a)({},t,{game:s.loading()})},Ln=function(t,n,e){return Object(st.a)({},t,{game:s.loaded(O.create(n,b.fromEntities(e,n.dimension)))})},Cn=function(t,n){return Object(st.a)({},t,{stepId:n})},Gn=function(t,n,e){return function(t,n){return s.isLoaded(n.game)?t():n}((function(){return t.stepId===n?Object(st.a)({},t,{stepId:void 0,game:s.loaded(e)}):t}),t)},Hn=function(t,n){return t.stepId===n?Object(st.a)({},t,{stepId:void 0}):t},zn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un(),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Gt.REQUEST_STEP:return Cn(t,n.step.id);case Gt.COMPLETE_STEP:return Gn(t,n.stepId,n.gameData);case Gt.ABORT_STEP:return Hn(t,n.stepId);case Gt.START_NEW_GAME:return Ln(t,n.maze,n.entities);case Gt.REQUEST_NEW_GAME:return Wn(t);default:return t}},Bn=e(38),Qn=e(7),Vn=e.n(Qn),Yn=e(4),Jn=Vn.a.mark(qn),Kn=Vn.a.mark(Fn);function qn(){var t,n,e,r,a,o,i,c;return Vn.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=1,u.next=4,Object(Yn.f)(Gt.REQUEST_STEP);case 4:return t=u.sent,n=t.step,u.next=8,Object(Yn.d)(nn);case 8:if(e=u.sent,!s.isLoaded(e)){u.next=31;break}return r=e.data,u.next=13,Object(Yn.b)(h.validateAll,n.instructions,r);case 13:if(a=u.sent,!w.isErr(a)){u.next=18;break}return u.next=17,Object(Yn.c)(In(n.id));case 17:return u.abrupt("continue",0);case 18:return o=O.generateAllAIInstructions(r),i=[].concat(Object(U.a)(o),Object(U.a)(n.instructions)),u.next=22,Object(Yn.b)(h.applyAll,i,r);case 22:if(c=u.sent,!w.isErr(c)){u.next=27;break}return u.next=26,Object(Yn.c)(In(n.id));case 26:return u.abrupt("continue",0);case 27:return u.next=29,Object(Yn.c)(Nn(n.id,c.data));case 29:return u.next=31,Object(Yn.b)(Fn,r,c.data);case 31:u.next=37;break;case 33:u.prev=33,u.t0=u.catch(1),console.warn("Error processing step"),console.error(u.t0);case 37:u.next=0;break;case 39:case"end":return u.stop()}}),Jn,null,[[1,33]])}function Fn(t,n){var e,r;return Vn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=n.entityData.entityMap[n.entityData.playerEntityId],0!==(r=b.entitiesAtPoint(n.entityData,e.position,n.maze.dimension).filter((function(t){return t.id!==e.id})).concat(b.neighborsCrossedByEntity(t.entityData,n.entityData,e.id,n.maze.dimension))).length){a.next=6;break}return a.abrupt("return");case 6:if(!r.find((function(t){return"blind-guardian"===t.type}))){a.next=12;break}return a.next=9,Object(Yn.b)(window.confirm,"You've been annihilated.");case 9:window.location.reload(),a.next=16;break;case 12:if(!r.find((function(t){return"exit"===t.type}))){a.next=16;break}return a.next=15,Object(Yn.b)(window.confirm,"You have escaped with your life. . . for now.");case 15:window.location.reload();case 16:case"end":return a.stop()}}),Kn)}var Zn=Vn.a.mark(Xn);function Xn(){return Vn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Yn.g)(Gt.MOVE_PLAYER,Vn.a.mark((function t(n){var e;return Vn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Yn.d)(an);case 2:return e=t.sent,t.next=5,Object(Yn.d)(rn);case 5:if(t.sent||!e){t.next=9;break}return t.next=9,Object(Yn.c)((r=E.create(n.direction?h.move(e.id,n.direction):h.wait(e.id)),{type:Gt.REQUEST_STEP,step:r}));case 9:case"end":return t.stop()}var r}),t)})));case 2:case"end":return t.stop()}}),Zn)}var $n=Vn.a.mark(ne),te=T.withDefault(T.of(localStorage.getItem("name")),(function(){var t=window.prompt("What is your name?")||"";return""!==t&&localStorage.setItem("name",t),""!==t?t:"?"}));function ne(){var t,n,e,a;return Vn.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=1,o.next=4,Object(Yn.f)(Gt.REQUEST_NEW_GAME);case 4:return t=o.sent,n=t.options,o.next=8,Object(Yn.b)(r.maze,n.mazeOptions||{});case 8:return e=o.sent,a=d.fromMazeData(e),o.next=12,Object(Yn.c)(Dn(a,ee(a)));case 12:o.next=18;break;case 14:o.prev=14,o.t0=o.catch(1),console.warn("Error initializing new game"),console.error(o.t0);case 18:o.next=0;break;case 20:case"end":return o.stop()}}),$n,null,[[1,14]])}var ee=function(t){var n=t.dimension,e=l.create(te,c.pointAlongEdge(n)),r=y.create(c.randomPoint(n)),a=new Array(o.randomInRange(2,8)).fill(void 0).map((function(t){return m.create(c.randomPoint(n))}));return[e,r].concat(Object(U.a)(a))},re=Vn.a.mark(oe),ae=[ne,qn,Xn];function oe(){return Vn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Yn.a)(ae.map((function(t){return Object(Yn.e)(t)})));case 2:return t.next=4,Object(Yn.c)(Sn({mazeOptions:{dimension:c.create(15,15),algorithm:"aldous-broder"}}));case 4:case"end":return t.stop()}}),re)}A.a.render(k.a.createElement(N.a,{store:function(){var t=Object(Bn.a)(),n=Object(Rn.d)(zn,Object(Rn.a)(t));return t.run(oe),n}()},k.a.createElement("div",{className:S.a.app},k.a.createElement(Pn,null))),document.getElementById("root"))},6:function(t,n,e){t.exports={root:"GamePad_root__Lay6t",row:"GamePad_row__164Sm",block:"GamePad_block__l2_xd",button:"GamePad_button__3kDFo",wait:"GamePad_wait__5DVYu"}}},[[41,1,2]]]);
//# sourceMappingURL=main.192b763a.chunk.js.map