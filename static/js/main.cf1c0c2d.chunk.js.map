{"version":3,"sources":["app/actions.ts","app/types/dimension.ts","app/types/mazeData.ts","app/types/cell.ts","app/types/maze.ts","app/types/loadable.ts","app/selectors.ts","app/views/Cell.tsx","app/views/Grid.tsx","app/views/Game.tsx","app/views/App.tsx","app/state.ts","app/reducer.ts","app/util/api.ts","app/saga.ts","index.tsx","app/store.ts"],"names":["ActionTypes","create","width","height","fromApi","dimension","base64","bytes","Uint8Array","from","atob","c","charCodeAt","fromByte","byte","walls","n","s","e","w","fromMazeData","grid","r","row","push","Cell","isLoading","l","state","isLoaded","isErrored","loading","loaded","data","errored","getGame","createSelector","game","drawSide","wall","cell","style","boxSizing","borderTop","borderRight","borderBottom","borderLeft","display","Grid","overflow","map","lineHeight","Game","maze","connect","className","classNames","Loadable","init","newGame","requestNewGame","options","type","REQUEST_NEW_GAME","reducer","State","action","START_NEW_GAME","API_ROOT","Dimension","algorithm","request","fetch","method","mode","headers","body","JSON","stringify","dimensions","then","response","text","MazeData","handleNewGame","root","take","call","Api","mazeOptions","put","Maze","console","warn","error","sagas","all","spawn","ReactDOM","render","store","sagaMiddleware","createSagaMiddleware","createStore","applyMiddleware","run","Saga","configureStore","document","getElementById"],"mappings":"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","file":"static/js/main.cf1c0c2d.chunk.js","sourcesContent":["import { MazeData, Maze } from \"./types\";\n\nexport enum ActionTypes {\n  REQUEST_NEW_GAME = \"REQUEST_NEW_GAME\",\n  START_NEW_GAME = \"START_NEW_GAME\"\n}\n\ninterface NewGameOptions {\n  mazeOptions?: MazeData.Options;\n}\nexport interface RequestNewGame {\n  type: ActionTypes.REQUEST_NEW_GAME;\n  options: NewGameOptions;\n}\n\nexport interface StartNewGame {\n  type: ActionTypes.START_NEW_GAME;\n  maze: Maze.Maze;\n}\n\nexport type AppAction = RequestNewGame | StartNewGame;\n\nexport const requestNewGame = (\n  options: NewGameOptions = {}\n): RequestNewGame => ({ type: ActionTypes.REQUEST_NEW_GAME, options });\n\nexport const startNewGame = (maze: Maze.Maze): StartNewGame => ({\n  type: ActionTypes.START_NEW_GAME,\n  maze\n});\n","export interface Dimension {\n  width: number;\n  height: number;\n}\n\nexport const create = (width: number = 0, height: number = 0): Dimension => ({\n  width,\n  height\n});\n","import { Dimension } from \".\";\n\nexport interface MazeData {\n  bytes: Uint8Array;\n  dimension: Dimension.Dimension;\n}\n\nexport interface Options {\n  dimension?: Dimension.Dimension;\n  algorithm?: \"aldous-broder\" | \"binary-tree\" | \"side-winder\";\n}\n\nexport const fromApi = (\n  dimension: Dimension.Dimension,\n  base64: string\n): MazeData => {\n  return {\n    bytes: Uint8Array.from(atob(base64), c => c.charCodeAt(0)),\n    dimension: dimension\n  };\n};\n","export interface Cell {\n  walls: Walls;\n}\n\n/**\n * A wall is present to direction n if n === true\n */\nexport interface Walls {\n  n: boolean;\n  e: boolean;\n  s: boolean;\n  w: boolean;\n}\n\nexport const walls = ({ n, e, s, w }: Partial<Walls>): Walls => ({\n  n: n || false,\n  e: e || false,\n  s: s || false,\n  w: w || false\n});\n\nexport const fromByte = (byte: number) => ({\n  walls: walls({\n    n: !((byte & 0b00001000) > 0),\n    s: !((byte & 0b00000100) > 0),\n    e: !((byte & 0b00000010) > 0),\n    w: !((byte & 0b00000001) > 0)\n  })\n});\n","import * as Cell from \"./cell\";\nimport * as MazeData from \"./mazeData\";\nimport { Dimension } from \".\";\n\nexport interface Maze {\n  readonly grid: Grid;\n  readonly dimension: Dimension.Dimension;\n}\n\nexport type Grid = Array<Array<Cell.Cell>>;\n\nexport const fromMazeData = ({ dimension, bytes }: MazeData.MazeData): Maze => {\n  const grid: Grid = [];\n  for (let r = 0; r < dimension.height; r++) {\n    const row = [];\n    for (let c = 0; c < dimension.width; c++) {\n      row.push(Cell.fromByte(bytes[r * dimension.width + c]));\n    }\n    grid.push(row);\n  }\n\n  return {\n    grid,\n    dimension\n  };\n};\n","interface Loaded<T> {\n  state: \"Loaded\";\n  data: T;\n}\n\ninterface Loading {\n  state: \"Loading\";\n}\n\ninterface Errored {\n  state: \"Errored\";\n  e: any;\n}\n\nexport type Loadable<T> = Loaded<T> | Loading | Errored;\n\nexport const isLoading = <T>(l: Loadable<T>): l is Loading =>\n  l.state === \"Loading\";\n\nexport const isLoaded = <T>(l: Loadable<T>): l is Loaded<T> =>\n  l.state === \"Loaded\";\n\nexport const isErrored = <T>(l: Loadable<T>): l is Errored =>\n  l.state === \"Errored\";\n\nexport const loading = <T>(): Loading => ({ state: \"Loading\" });\n\nexport const loaded = <T>(data: T): Loaded<T> => ({\n  state: \"Loaded\",\n  data\n});\n\nexport const errored = <T>(e: any): Errored => ({ state: \"Errored\", e });\n","import { State } from \"./state\";\nimport { createSelector } from \"reselect\";\n\nexport const getState = (state: State): State => state;\n\nexport const getGame = createSelector(getState, state => state.game);\n","import React from \"react\";\nimport { Cell as CellT, Dimension } from \"../types\";\n\ninterface Props {\n  cell: CellT.Cell;\n}\n\nconst IS_WALL = \"0.5px solid black\";\nconst IS_OPEN = \"0.5px transparent\";\nconst drawSide = (wall: boolean) => (wall ? IS_WALL : IS_OPEN);\n\nexport const Cell = ({ cell }: Props): JSX.Element => {\n  const { walls } = cell;\n  return (\n    <span\n      style={{\n        boxSizing: \"border-box\",\n        borderTop: drawSide(walls.n),\n        borderRight: drawSide(walls.e),\n        borderBottom: drawSide(walls.s),\n        borderLeft: drawSide(walls.w),\n        height: \"1rem\",\n        width: \"1rem\",\n        display: \"inline-block\"\n      }}\n    />\n  );\n};\n","import React from \"react\";\nimport { Maze } from \"../types\";\nimport { Cell } from \"./Cell\";\n\ninterface Props {\n  grid: Maze.Grid;\n}\n\nexport const Grid = ({ grid }: Props): JSX.Element => {\n  return (\n    <div style={{ overflow: \"auto\", width: \"max-content\" }}>\n      {grid.map(row => (\n        <div style={{ lineHeight: 0 }}>\n          {row.map(cell => (\n            <Cell cell={cell} />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n","import * as React from \"react\";\nimport { GameData } from \"../state\";\nimport { Grid } from \"./Grid\";\n\ntype Props = GameData;\n\nexport const Game = ({ maze }: Props): JSX.Element => (\n  <>\n    <Grid grid={maze.grid} />\n  </>\n);\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport \"./App.css\";\nimport { connect } from \"react-redux\";\nimport { State, GameData } from \"../state\";\nimport { Loadable } from \"../types\";\nimport { getGame } from \"../selectors\";\nimport { Game } from \"./Game\";\n\ninterface StateProps {\n  game: Loadable.Loadable<GameData>;\n}\n\ninterface DispatchProps {}\n\ntype Props = StateProps & DispatchProps;\n\nconst App = ({ game }: Props) => {\n  return (\n    <div className={classNames(\"root\")}>\n      {Loadable.isLoading(game) && <span>Loading . . . </span>}\n      {Loadable.isLoaded(game) && <Game {...game.data} />}\n    </div>\n  );\n};\n\nexport const mapStateToProps = (state: State): StateProps => ({\n  game: getGame(state)\n});\n\nexport default connect(mapStateToProps)(App);\n","import { Maze } from \"./types\";\nimport { Loadable } from \"./types\";\n\nexport interface GameData {\n  maze: Maze.Maze;\n}\n\nexport interface State {\n  game: Loadable.Loadable<GameData>;\n}\n\nexport const create = (init = {}): State => ({\n  game: Loadable.loading(),\n  ...init\n});\n\nexport const requestingNewGame = (state: State): State => ({\n  ...state,\n  game: Loadable.loading()\n});\n\nexport const newGame = (state: State, maze: Maze.Maze): State => ({\n  ...state,\n  game: Loadable.loaded({ maze })\n});\n","import * as State from \"./state\";\nimport { AppAction, ActionTypes } from \"./actions\";\n\nexport const reducer = (\n  state: State.State = State.create(),\n  action: AppAction\n): State.State => {\n  switch (action.type) {\n    case ActionTypes.START_NEW_GAME:\n      return State.newGame(state, action.maze);\n    case ActionTypes.REQUEST_NEW_GAME:\n    default:\n      return state;\n  }\n};\n","import { Dimension, MazeData } from \"../types\";\n\nconst API_ROOT = \"https://fv9o21r19a.execute-api.us-east-1.amazonaws.com/dev\";\n\nexport const maze = ({\n  dimension = Dimension.create(10, 10),\n  algorithm = \"aldous-broder\"\n}: MazeData.Options = {}): Promise<MazeData.MazeData> => {\n  const request = fetch(`${API_ROOT}`, {\n    method: \"post\",\n    mode: \"cors\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({ dimensions: dimension, algorithm })\n  });\n  return request\n    .then(response => response.text())\n    .then(base64 => MazeData.fromApi(dimension, base64));\n};\n","import { call, spawn, all, take, put } from \"redux-saga/effects\";\nimport { Api } from \"./util\";\nimport { Maze, Dimension } from \"./types\";\nimport {\n  ActionTypes,\n  RequestNewGame,\n  startNewGame,\n  requestNewGame\n} from \"./actions\";\n\nfunction* handleNewGame() {\n  while (true) {\n    try {\n      const { options }: RequestNewGame = yield take(\n        ActionTypes.REQUEST_NEW_GAME\n      );\n      const data = yield call(Api.maze, options.mazeOptions || {});\n      yield put(startNewGame(Maze.fromMazeData(data)));\n    } catch (e) {\n      console.warn(\"Error initializing new game\");\n      console.error(e);\n    }\n  }\n}\n\nconst sagas = [handleNewGame];\n\nexport function* root() {\n  yield all(sagas.map(s => spawn(s)));\n  yield put(\n    requestNewGame({\n      mazeOptions: {\n        dimension: Dimension.create(20, 20),\n        algorithm: \"aldous-broder\"\n      }\n    })\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./app/views/App\";\nimport { Provider } from \"react-redux\";\nimport { configureStore } from \"./app/store\";\n\nReactDOM.render(\n  <Provider store={configureStore()}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n","import { createStore, applyMiddleware, Store } from \"redux\";\nimport { reducer } from \"./reducer\";\nimport createSagaMiddleware from \"redux-saga\";\nimport * as Saga from \"./saga\";\nimport { State } from \"./state\";\nimport { AppAction } from \"./actions\";\n\nexport const configureStore = (): Store<State, AppAction> => {\n  const sagaMiddleware = createSagaMiddleware();\n  const store = createStore(reducer, applyMiddleware(sagaMiddleware));\n\n  sagaMiddleware.run(Saga.root);\n\n  return store;\n};\n"],"sourceRoot":""}